# geolfond
Проект для автоматизации получения данных о лицензиях на пользование недрами
## API
Данные в формате JSON доступны при запросе к API <br>
Сайт проекта на [geolfind.ru](https://www.geolfond.ru) <br>
Документация для [api](https://www.geolfond.ru/api/docs) <br>



## Функционал скрипта
Скрипт загружает данные из реестра лицензий на право пользование недрами <br>
Обрабатывает данные с помощью pandas и сохраняет в таблицу Excel<br>

Извлекаются отдельные столбцы для ИНН, Наименование недропользователя, самой северной координаты (применимость льгот по НДД)

Добавляются столбцы: 
* prev_owner - название предыдущего недропользователя
* prev_lic - номер предыдущей лицензии для данной записи
* forw_lic - номер следующей лицензии для данной записи
* Last[True]: запись лицензии последняя по данному ЛУ
* Last[False]: запись лицензии не последняя (историеская) по данному ЛУ
* N - Самая сверная координата северной шиторы лицензионного учатка для определения применимости льготы по НДД для нефтегазовых провинций севернее 70-го градуса северной широт
* E - Соответствующая ей координата восточной долготы

С очищенной выгрузкой удобнее работать в BI приложениях или других проектах или автоматизировать обновление источника данных

## Установка
```
git clone https://github.com/oleg-wl/gpn_rosnedra/
pip install -r requirements.txt
cat src/example.config.ini > src/config.ini
```
config.ini:<br>


Добавлен CLI интерфейс на базе click <br>
Информация об основных командах
```
python main.py --help
```
filters - выводит список фильтров
downloads - скачать нужные данные с реестра

```
python main.py filter // показать код фильтра для вида ПИ лицензии
python main.py download // Запрос по фильтру кода ПИ лицензии (default 'oil')
python main.py download -f water //Запрос по фильтру кода ПИ лицензии "Подземные воды"
```

Тихий запуск
```
python geolfond.py
``` 
Можно добавить в автозагрузку или запускать по расписанию для обновления данных

